<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>CodePen - í˜„ì¥ì²´í—˜í•™ìŠµ ê°€ì´ë“œë¶</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í˜„ì¥ì²´í—˜í•™ìŠµ ê°€ì´ë“œë¶</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.1.2/dist/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        body {
            background: linear-gradient(135deg, #E0F7FA 0%, #E8EAF6 100%);
            font-family: 'Jua', sans-serif;
            font-size: 18px;
            line-height: 1.6;
            touch-action: manipulation;
            min-height: 100vh;
            padding-bottom: 2rem;
            color: #2C3E50;
        }

        .section-header {
            background: linear-gradient(135deg, #4FC3F7 0%, #B3E5FC 100%);
            border: 3px solid #03A9F4;
            border-radius: 15px;
        }

        input, textarea, button {
            font-family: 'Jua', sans-serif;
            font-size: 1.1rem !important;
        }

        .card {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 2px solid #03A9F4;
            margin-bottom: 20px;
            padding: 20px;
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .cool-button {
            background: linear-gradient(135deg, #03A9F4 0%, #4FC3F7 100%);
            border: 2px solid #0288D1;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            font-size: 1.1rem;
        }

        .cool-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #0288D1 0%, #03A9F4 100%);
        }

        .cool-input {
            border: 2px solid #03A9F4;
            border-radius: 12px;
            padding: 12px 16px;
            background-color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            width: 100%;
            transition: all 0.3s;
        }

        .cool-input:focus {
            border-color: #0288D1;
            outline: none;
            box-shadow: 0 0 0 3px rgba(3,169,244,0.3);
            transform: translateY(-1px);
        }

        .problem-input-group {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border: 2px solid #03A9F4;
            padding: 16px;
            margin-bottom: 16px;
        }

        .editor-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            background: #E3F2FD;
            padding: 12px;
            border-radius: 12px 12px 0 0;
            border: 2px solid #03A9F4;
            border-bottom: none;
        }

        .editor-button {
            background: white;
            border: 1px solid #03A9F4;
            border-radius: 6px;
            padding: 8px 12px;
            min-width: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: #0288D1;
        }

        .editor-button:hover {
            background: #E1F5FE;
            transform: translateY(-1px);
        }

        .editor-select {
            padding: 8px;
            border: 1px solid #03A9F4;
            border-radius: 6px;
            background: white;
            font-size: 1rem;
            color: #0288D1;
            cursor: pointer;
        }

        .editor-select:hover {
            background: #E1F5FE;
        }

        .color-picker {
            width: 35px;
            height: 35px;
            padding: 0;
            border: 2px solid #03A9F4;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-picker:hover {
            transform: scale(1.1);
        }

        #editor {
            border: 2px solid #03A9F4;
            border-radius: 0 0 12px 12px;
            min-height: 200px;
            padding: 16px;
            background: white;
            font-size: 1.1rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 5% auto;
            padding: 24px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 15px;
            border: 3px solid #03A9F4;
            font-size: 1.1rem;
        }

        .close-button {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            cursor: pointer;
            color: #03A9F4;
            transition: all 0.2s;
        }

        .close-button:hover {
            color: #0288D1;
            transform: scale(1.1);
        }

        /* ê¸€ì í¬ê¸° ë° ìŠ¤íƒ€ì¼ */
        h1 {
            font-size: 2.5rem !important;
            line-height: 1.2;
            color: #0288D1;
        }

        h2 {
            font-size: 2rem !important;
            line-height: 1.3;
            color: #0288D1;
        }

        h3 {
            font-size: 1.75rem !important;
            line-height: 1.4;
            color: #03A9F4;
        }

        p, li {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #2C3E50;
        }

        .text-lg {
            font-size: 1.25rem !important;
        }

        .text-xl {
            font-size: 1.5rem !important;
        }

        @media (max-width: 640px) {
            body {
                font-size: 16px;
            }

            h1 {
                font-size: 2rem !important;
            }

            h2 {
                font-size: 1.75rem !important;
            }

            h3 {
                font-size: 1.5rem !important;
            }

            p, li {
                font-size: 1rem;
            }

            .cool-button {
                padding: 10px 20px;
                font-size: 1rem;
            }

            .cool-input {
                padding: 10px 14px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Header -->
    <header class="text-center mb-8">
        <h1 class="font-bold text-blue-700 mb-4">
            ğŸŒŠ í˜„ì¥ì²´í—˜í•™ìŠµ ê°€ì´ë“œë¶
        </h1>
        <p class="text-xl text-blue-600">í•¨ê»˜ ë°°ìš°ë©° ì²´í—˜í•´ìš”!</p>
    </header>

    <!-- ëª¨ë“œ ì „í™˜ ë²„íŠ¼ -->
    <div class="flex justify-center gap-4 mb-6">
        <button id="teacherModeBtn" 
                onclick="enableTeacherMode()" 
                class="cool-button">
            ğŸ‘©â€ğŸ« êµì‚¬ ëª¨ë“œë¡œ ì „í™˜
        </button>
        <button id="studentModeBtn" 
                onclick="enableStudentMode()" 
                class="cool-button bg-green-500" 
                style="display: none;">
            ğŸ‘¨â€ğŸ“ í•™ìƒ ëª¨ë“œë¡œ ì „í™˜
        </button>
    </div>

    <!-- êµì‚¬ ì „ìš© ì„¹ì…˜ -->
    <section id="teacherSection" class="section-header p-6 rounded-lg shadow-md mb-6" style="display: none;">
        <h2 class="text-2xl font-bold mb-4">âœï¸ í˜„ì¥ì²´í—˜í•™ìŠµ ì •ë³´ ì…ë ¥</h2>
        
        <div class="space-y-4 mb-6">
            <div class="flex flex-col">
                <label for="dateInput" class="text-lg mb-2">ğŸ“… ë‚ ì§œ</label>
                <input id="dateInput" type="date" 
                       class="cool-input" 
                       placeholder="ë‚ ì§œ ì„ íƒ">
            </div>
            
            <div class="flex flex-col">
                <label for="placeInput" class="text-lg mb-2">ğŸ« ì¥ì†Œ</label>
                <input id="placeInput" type="text" 
                       class="cool-input" 
                       placeholder="í˜„ì¥ì²´í—˜í•™ìŠµ ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>

            <div class="flex flex-col">
                <label class="text-lg mb-2">ğŸ“ ì•ˆë‚´ì‚¬í•­</label>
                <div id="editor-container"></div>
            </div>
        </div>

        <div class="mb-6">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold">ğŸ“¸ ì‚¬ì§„</h3>
                <button onclick="addMediaLink('photos')" 
                        class="cool-button">
                    ì‚¬ì§„ ì¶”ê°€í•˜ê¸°
                </button>
            </div>
            <div id="photosLinks" class="space-y-3"></div>
        </div>

        <div class="mb-6">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold">ğŸ”— ì°¸ê³  ì‚¬ì´íŠ¸</h3>
                <button onclick="addWebsiteLink()" 
                        class="cool-button">
                    ë§í¬ ì¶”ê°€í•˜ê¸°
                </button>
            </div>
            <div id="websiteLinks" class="space-y-3"></div>
        </div>

        <div class="mb-6">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold">â“ í˜„ì¥ì²´í—˜í•™ìŠµì„ í•˜ë©´ì„œ í•´ê²°í•´ ë³´ì•„ìš”.</h3>
                <button onclick="addProblem()" 
                        class="cool-button">
                    ë¬¸ì œ ì¶”ê°€í•˜ê¸°
                </button>
            </div>
            <div id="problemsContainer" class="space-y-3"></div>
        </div>

        <button onclick="saveSchedule()" 
                class="cool-button w-full">
            ğŸ’¾ ì €ì¥í•˜ê¸°
        </button>
    </section>

    <!-- í•™ìƒ ì •ë³´ ì…ë ¥ ì„¹ì…˜ -->
    <section id="studentSection" class="card bg-blue-50 p-6 mb-6">
        <h2 class="text-2xl font-bold text-blue-700 mb-4">ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”!</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="flex flex-col">
                <label for="gradeInput" class="text-lg mb-2">í•™ë…„</label>
                <input id="gradeInput" type="number" 
                       class="cool-input" 
                       placeholder="í•™ë…„ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="flex flex-col">
                <label for="classInput" class="text-lg mb-2">ë°˜</label>
                <input id="classInput" type="number" 
                       class="cool-input" 
                       placeholder="ë°˜ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="flex flex-col">
                <label for="nameInput" class="text-lg mb-2">ì´ë¦„</label>
                <input id="nameInput" type="text" 
                       class="cool-input" 
                       placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
        </div>
    </section>

    <!-- ì €ì¥ëœ ì¼ì • ëª©ë¡ -->
    <section class="card mb-6">
        <h2 class="text-2xl font-bold text-blue-700 mb-4">ğŸ“š í˜„ì¥ì²´í—˜í•™ìŠµ ê°€ì´ë“œ</h2>
        <div id="scheduleList" class="space-y-4"></div>
    </section>

    <!-- í•™ìŠµ ë¬¸ì œ ì„¹ì…˜ -->
    <section id="problemSection" class="card" style="display: none;">
    </section>

    <!-- ì œì¶œëœ í•™ìƒ ëª©ë¡ -->
    <section id="submissionsList" class="card" style="display: none;">
    </section>

    <!-- ì´ˆê¸°í™” ë²„íŠ¼ -->
    <section class="text-center">
        <button id="resetButton" 
                onclick="resetData()" 
                class="cool-button bg-red-500" 
                style="display: none;">
            ğŸ—‘ï¸ ì´ˆê¸°í™”
        </button>
    </section>

    <!-- ëª¨ë‹¬ -->
    <div id="submissionModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeSubmissionModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let teacherMode = false;
        let scheduleData = JSON.parse(localStorage.getItem('scheduleData')) || [];
        let studentSubmissions = JSON.parse(localStorage.getItem('studentSubmissions')) || [];

        // localStorage ì €ì¥ í•¨ìˆ˜
        function saveToLocalStorage() {
            localStorage.setItem('scheduleData', JSON.stringify(scheduleData));
            localStorage.setItem('studentSubmissions', JSON.stringify(studentSubmissions));
        }

        // WYSIWYG ì—ë””í„° ì´ˆê¸°í™”
        function initWysiwygEditor() {
            const container = document.getElementById('editor-container');
            container.innerHTML = `
                <div class="wysiwyg-container">
                    <div class="editor-toolbar">
                        <!-- ê¸€ì ìŠ¤íƒ€ì¼ -->
                        <select class="editor-select" data-command="formatBlock">
                            <option value="p">ê¸°ë³¸ ê¸€ì</option>
                            <option value="h1">ì œëª© 1</option>
                            <option value="h2">ì œëª© 2</option>
                            <option value="h3">ì œëª© 3</option>
                        </select>

                        <!-- ê¸€ì í¬ê¸° -->
                        <select class="editor-select" data-command="fontSize">
                            <option value="2">ì‘ê²Œ</option>
                            <option value="3" selected>ë³´í†µ</option>
                            <option value="4">í¬ê²Œ</option>
                            <option value="5">ë” í¬ê²Œ</option>
                            <option value="6">ë§¤ìš° í¬ê²Œ</option>
                        </select>

                        <!-- ê¸€ììƒ‰ -->
                        <input type="color" class="color-picker" data-command="foreColor" title="ê¸€ììƒ‰" value="#2C3E50">
                        
                        <!-- ë°°ê²½ìƒ‰ -->
                        <input type="color" class="color-picker" data-command="backColor" title="ë°°ê²½ìƒ‰" value="#FFFFFF">

                        <!-- ê¸€ì ìŠ¤íƒ€ì¼ ë²„íŠ¼ë“¤ -->
                        <button type="button" class="editor-button" data-command="bold" title="êµµê²Œ">
                            <strong>êµµê²Œ</strong>
                        </button>
                        <button type="button" class="editor-button" data-command="italic" title="ê¸°ìš¸ì„">
                            <em>ê¸°ìš¸ì„</em>
                        </button>
                        <button type="button" class="editor-button" data-command="underline" title="ë°‘ì¤„">
                            <u>ë°‘ì¤„</u>
                        </button>
                        <button type="button" class="editor-button" data-command="strikeThrough" title="ì·¨ì†Œì„ ">
                            <s>ì·¨ì†Œì„ </s>
                        </button>

                        <!-- ì •ë ¬ -->
                        <button type="button" class="editor-button" data-command="justifyLeft" title="ì™¼ìª½ ì •ë ¬">
                            ì™¼ìª½
                        </button>
                        <button type="button" class="editor-button" data-command="justifyCenter" title="ê°€ìš´ë° ì •ë ¬">
                            ê°€ìš´ë°
                        </button>
                        <button type="button" class="editor-button" data-command="justifyRight" title="ì˜¤ë¥¸ìª½ ì •ë ¬">
                            ì˜¤ë¥¸ìª½
                        </button>

                        <!-- ëª©ë¡ -->
                        <button type="button" class="editor-button" data-command="insertUnorderedList" title="ê¸°í˜¸ ëª©ë¡">
                            ê¸°í˜¸ëª©ë¡
                        </button>
                        <button type="button" class="editor-button" data-command="insertOrderedList" title="ë²ˆí˜¸ ëª©ë¡">
                            ë²ˆí˜¸ëª©ë¡
                        </button>
                        
                        <!-- ë“¤ì—¬ì“°ê¸° -->
                        <button type="button" class="editor-button" data-command="indent" title="ë“¤ì—¬ì“°ê¸°">
                            ë“¤ì—¬ì“°ê¸°
                        </button>
                        <button type="button" class="editor-button" data-command="outdent" title="ë‚´ì–´ì“°ê¸°">
                            ë‚´ì–´ì“°ê¸°
                        </button>
                    </div>
                    <div id="editor" contenteditable="true" class="p-4 min-h-[200px]"></div>
                </div>
            `;

            const editor = document.getElementById('editor');
            const buttons = document.querySelectorAll('.editor-button');
            const selects = document.querySelectorAll('.editor-select');
            const colorPickers = document.querySelectorAll('.color-picker');

            // ë²„íŠ¼ ì´ë²¤íŠ¸
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    const command = button.dataset.command;
                    document.execCommand(command, false, null);
                    editor.focus();
                });
            });

            // ì„ íƒ ë©”ë‰´ ì´ë²¤íŠ¸
            selects.forEach(select => {
                select.addEventListener('change', () => {
                    const command = select.dataset.command;
                    document.execCommand(command, false, select.value);
                    editor.focus();
                });
            });

            // ì»¬ëŸ¬í”¼ì»¤ ì´ë²¤íŠ¸
            colorPickers.forEach(picker => {
                picker.addEventListener('change', () => {
                    const command = picker.dataset.command;
                    document.execCommand(command, false, picker.value);
                    editor.focus();
                });
            });

            // ì—ë””í„° í¬ì»¤ìŠ¤ íš¨ê³¼
            editor.addEventListener('focus', () => {
                editor.style.boxShadow = '0 0 0 3px rgba(3,169,244,0.3)';
            });

            editor.addEventListener('blur', () => {
                editor.style.boxShadow = 'none';
            });
        }

        // êµì‚¬ ëª¨ë“œ ì „í™˜
        function enableTeacherMode() {
            const password = prompt("ì„ ìƒë‹˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:");
            if (password === "1234") {
                teacherMode = true;
                toggleMode();
                alert("êµì‚¬ ëª¨ë“œê°€ ì‹œì‘ë˜ì—ˆì–´ìš”! ğŸ‰");
            } else {
                alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”. ğŸ˜Š");
            }
        }

        // í•™ìƒ ëª¨ë“œ ì „í™˜
        function enableStudentMode() {
            teacherMode = false;
            toggleMode();
            alert("í•™ìƒ ëª¨ë“œë¡œ ëŒì•„ì™”ì–´ìš”! ğŸ“š");
        }

        // ëª¨ë“œ ì „í™˜ ì‹œ í™”ë©´ ì—…ë°ì´íŠ¸
        function toggleMode() {
            document.getElementById("resetButton").style.display = teacherMode ? "block" : "none";
            document.getElementById("teacherSection").style.display = teacherMode ? "block" : "none";
            document.getElementById("studentSection").style.display = !teacherMode ? "block" : "none";
            document.getElementById("submissionsList").style.display = teacherMode ? "block" : "none";
            document.getElementById("studentModeBtn").style.display = teacherMode ? "block" : "none";
            document.getElementById("teacherModeBtn").style.display = teacherMode ? "none" : "block";
            document.getElementById("problemSection").style.display = !teacherMode ? "block" : "none";
            displaySchedules();
            if (teacherMode) {
                displaySubmissions();
            }
        }

        // ì›¹í˜ì´ì§€ ë§í¬ ì¶”ê°€
        function addWebsiteLink() {
            const container = document.getElementById('websiteLinks');
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-wrap items-center gap-2 mb-2 p-2 bg-blue-50 rounded-lg';
            
            const urlInput = document.createElement('input');
            urlInput.type = 'text';
            urlInput.className = 'cool-input flex-1';
            urlInput.placeholder = 'ğŸ”— ì›¹í˜ì´ì§€ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”';
            
            const descInput = document.createElement('input');
            descInput.type = 'text';
            descInput.className = 'cool-input flex-1';
            descInput.placeholder = 'ğŸ“ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.type = 'button';
            deleteBtn.className = 'cool-button bg-red-500 text-white';
            deleteBtn.innerHTML = 'ğŸ—‘ï¸ ì‚­ì œ';
            deleteBtn.onclick = function() {
                wrapper.remove();
            };
            
            wrapper.appendChild(urlInput);
            wrapper.appendChild(descInput);
            wrapper.appendChild(deleteBtn);
            container.appendChild(wrapper);
        }

        // ì‚¬ì§„ ë§í¬ ì¶”ê°€
        function addMediaLink(type) {
            if (type === 'photos') {
                const container = document.getElementById('photosLinks');
                const wrapper = document.createElement('div');
                wrapper.className = 'flex flex-wrap items-center gap-2 mb-2 p-2 bg-blue-50 rounded-lg';
                
                const urlInput = document.createElement('input');
                urlInput.type = 'text';
                urlInput.className = 'cool-input flex-1';
                urlInput.placeholder = 'ğŸ“¸ ì‚¬ì§„ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                
                const deleteBtn = document.createElement('button');
                deleteBtn.type = 'button';
                deleteBtn.className = 'cool-button bg-red-500 text-white';
                deleteBtn.innerHTML = 'ğŸ—‘ï¸ ì‚­ì œ';
                deleteBtn.onclick = function() {
                    wrapper.remove();
                };
                
                wrapper.appendChild(urlInput);
                wrapper.appendChild(deleteBtn);
                container.appendChild(wrapper);
            }
        }

        // ë¬¸ì œ ì¶”ê°€
        function addProblem() {
            const container = document.getElementById('problemsContainer');
            const problemDiv = document.createElement('div');
            problemDiv.className = 'problem-input-group';
            problemDiv.innerHTML = `
                <div class="flex items-center gap-2">
                    <textarea class="cool-input flex-1" 
                             placeholder="âœï¸ ë¬¸ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”" rows="3"></textarea>
                    <button type="button" onclick="removeProblem(this)" 
                            class="cool-button bg-red-500">ğŸ—‘ï¸ ì‚­ì œ</button>
                </div>
            `;
            container.appendChild(problemDiv);
        }

        // ë¬¸ì œ ì‚­ì œ
        function removeProblem(button) {
            button.closest('.problem-input-group').remove();
        }

// ì¼ì • í‘œì‹œ
        function displaySchedules() {
            const scheduleList = document.getElementById("scheduleList");
            const problemSection = document.getElementById("problemSection");
            
            scheduleList.innerHTML = "";
            problemSection.innerHTML = "<h2 class='text-2xl font-bold text-blue-700 mb-4'>âœï¸ ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ì„¸ìš”</h2>";
            
            problemSection.style.display = !teacherMode ? "block" : "none";

            scheduleData.forEach((schedule) => {
                const scheduleItem = document.createElement("div");
                scheduleItem.className = 'card';

                const photosHTML = schedule.photoLinks.length > 0 
                    ? `<div class="mt-4">
                        <strong>ğŸ“¸ ì‚¬ì§„:</strong><br>
                        ${schedule.photoLinks.map(link => 
                            `<img src="${link}" alt="í˜„ì¥ì²´í—˜í•™ìŠµ ì‚¬ì§„" 
                                  class="w-full max-w-lg mx-auto my-2 rounded-lg shadow-md">`
                        ).join('')}
                       </div>` 
                    : '';

                const websitesHTML = schedule.websiteLinks.length > 0
                    ? `<div class="mt-4">
                        <strong>ğŸ”— ì°¸ê³ ìë£Œ:</strong><br>
                        ${schedule.websiteLinks.map(link => `
                            <div class="mb-2">
                                <a href="${link.url}" target="_blank" rel="noopener noreferrer" 
                                   class="text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-2">
                                   ğŸ“ ${link.description || link.url}
                                </a>
                            </div>
                        `).join('')}
                       </div>`
                    : '';

                scheduleItem.innerHTML = `
                    <h3 class="text-2xl font-bold text-blue-600 mb-3">ğŸ« ${schedule.place}</h3>
                    <p class="mb-3"><strong>ğŸ“… ë‚ ì§œ:</strong> ${schedule.date}</p>
                    <div class="mb-4">
                        <strong>â„¹ï¸ ì•ˆë‚´ì‚¬í•­:</strong><br>
                        <div class="mt-2 p-3 bg-blue-50 rounded-lg">${schedule.info}</div>
                    </div>
                    ${photosHTML}
                    ${websitesHTML}
                `;

                scheduleList.appendChild(scheduleItem);

                if (!teacherMode) {
                    const problemItem = document.createElement("div");
                    problemItem.className = 'card';
                    
                    if (schedule.problems && schedule.problems.length > 0) {
                        problemItem.innerHTML = `
                            <h4 class="text-xl font-bold text-blue-600 mb-4">ğŸ“ ${schedule.place} ì§ˆë¬¸</h4>
                            ${schedule.problems.map((problem, pIndex) => `
                                <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                                    <p class="font-medium mb-3 text-lg">${pIndex + 1}. ${problem}</p>
                                    <textarea
                                        id="answer_${schedule.id}_${pIndex}"
                                        class="cool-input w-full"
                                        placeholder="ì´ê³³ì— ë‹µë³€ì„ ì ì–´ì£¼ì„¸ìš”..."
                                        rows="3"
                                    ></textarea>
                                </div>
                            `).join('')}
                            <button
                                onclick="submitAnswers(${schedule.id})"
                                class="cool-button w-full mt-4"
                            >
                                ğŸ“® ë‹µë³€ ì œì¶œí•˜ê¸°
                            </button>
                        `;
                        
                        problemSection.appendChild(problemItem);
                    }
                }
            });
        }

        // ì œì¶œëœ ë‹µë³€ í‘œì‹œ
        function displaySubmissions() {
            if (!teacherMode) return;
            
            const submissionsList = document.getElementById("submissionsList");
            submissionsList.innerHTML = "<h2 class='text-2xl font-bold text-blue-700 mb-4'>ğŸ“‹ ì œì¶œëœ ë‹µë³€ ëª©ë¡</h2>";

            const studentsByClass = {};
            const submissionsByStudent = {};

            studentSubmissions.forEach((submission) => {
                const classKey = `${submission.grade}í•™ë…„ ${submission.className}ë°˜`;
                const studentKey = `${classKey}_${submission.name}`;
                
                if (!studentsByClass[classKey]) {
                    studentsByClass[classKey] = new Set();
                }
                studentsByClass[classKey].add(submission.name);
                
                if (!submissionsByStudent[studentKey] || 
                    new Date(submission.timestamp) > new Date(submissionsByStudent[studentKey].timestamp)) {
                    submissionsByStudent[studentKey] = submission;
                }
            });

            Object.entries(studentsByClass).forEach(([classKey, students]) => {
                const classItem = document.createElement("div");
                classItem.className = 'card';
                
                const studentsList = Array.from(students).sort();
                
                const studentButtons = studentsList.map(name => {
                    const studentKey = `${classKey}_${name}`;
                    const submission = submissionsByStudent[studentKey];
                    return `
                        <button
                            onclick='openSubmissionModal(${JSON.stringify(submission)})'
                            class="cool-button bg-blue-100 text-blue-800 hover:bg-blue-200"
                        >
                            ğŸ‘¤ ${name}
                            <span class="text-xs block text-gray-600">
                                ${new Date(submission.timestamp).toLocaleString('ko-KR', {
                                    month: 'short',
                                    day: 'numeric',
                                    hour: '2-digit',
                                    minute: '2-digit'
                                })}
                            </span>
                        </button>
                    `;
                }).join('');
                
                classItem.innerHTML = `
                    <div class="font-bold text-xl text-blue-600 mb-3">ğŸ“š ${classKey}</div>
                    <div class="flex flex-wrap gap-2">
                        ${studentButtons}
                    </div>
                `;
                
                submissionsList.appendChild(classItem);
            });
        }
 // ì¼ì • ì €ì¥
        function saveSchedule() {
            if (!teacherMode) {
                alert("ì„ ìƒë‹˜ ëª¨ë“œì—ì„œë§Œ ì €ì¥í•  ìˆ˜ ìˆì–´ìš”! ğŸ‘©â€ğŸ«");
                return;
            }

            const date = document.getElementById("dateInput").value;
            const place = document.getElementById("placeInput").value;
            const info = document.getElementById("editor").innerHTML;

            const photoLinks = Array.from(document.querySelectorAll('#photosLinks input[type="text"]'))
                .map(input => input.value.trim())
                .filter(Boolean);

            const websiteLinks = [];
            const websiteDivs = document.querySelectorAll('#websiteLinks > div');
            websiteDivs.forEach(div => {
                const inputs = div.querySelectorAll('input[type="text"]');
                if (inputs[0] && inputs[0].value.trim()) {
                    websiteLinks.push({
                        url: inputs[0].value.trim(),
                        description: inputs[1] ? inputs[1].value.trim() : ''
                    });
                }
            });

            const problems = Array.from(document.querySelectorAll('#problemsContainer textarea'))
                .map(textarea => textarea.value.trim())
                .filter(Boolean);

            if (!date || !place || !info || problems.length === 0) {
                alert("ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! âœï¸");
                return;
            }

            scheduleData.push({
                id: Date.now(),
                date,
                place,
                info,
                photoLinks,
                websiteLinks,
                problems
            });

            saveToLocalStorage();
            alert("ì•ˆë‚´ìë£Œê°€ ì €ì¥ë˜ì—ˆì–´ìš”! ğŸ‰");
            displaySchedules();
            clearInputs();
        }

        // ë‹µë³€ ì œì¶œ
        function submitAnswers(scheduleId) {
            const grade = document.getElementById("gradeInput").value;
            const className = document.getElementById("classInput").value;
            const name = document.getElementById("nameInput").value;
            const answers = {};
            
            const schedule = scheduleData.find(s => s.id === scheduleId);
            let allAnswered = true;
            
            schedule.problems.forEach((_, index) => {
                const answer = document.getElementById(`answer_${scheduleId}_${index}`).value;
                if (!answer) {
                    allAnswered = false;
                }
                answers[index] = answer;
            });

            if (!allAnswered) {
                alert("ëª¨ë“  ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”! âœï¸");
                return;
            }
            if (grade && className && name) {
                studentSubmissions.push({
                    scheduleId,
                    grade,
                    className,
                    name,
                    answers,
                    timestamp: new Date().toLocaleString()
                });

                saveToLocalStorage();
                alert("ë‹µë³€ì´ ì˜ ì œì¶œë˜ì—ˆì–´ìš”! ğŸ‘");
                displaySubmissions();
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById("gradeInput").value = "";
                document.getElementById("classInput").value = "";
                document.getElementById("nameInput").value = "";
                schedule.problems.forEach((_, index) => {
                    document.getElementById(`answer_${scheduleId}_${index}`).value = "";
                });
            } else {
                alert("í•™ë…„, ë°˜, ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“");
            }
        }

        // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜
        function openSubmissionModal(submission) {
            const modal = document.getElementById('submissionModal');
            const modalContent = document.getElementById('modalContent');
            const schedule = scheduleData.find(s => s.id === submission.scheduleId);

            if (!schedule) return;

            modalContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">ğŸ“ ë‹µë³€ í™•ì¸</h2>
                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                    <p class="text-lg mb-2">
                        <strong>ğŸ‘¤ ${submission.grade}í•™ë…„ ${submission.className}ë°˜ ${submission.name}</strong>
                    </p>
                    <p class="text-gray-600">â° ì œì¶œì‹œê°„: ${submission.timestamp}</p>
                    <p class="text-lg mt-2"><strong>ğŸ« ì¥ì†Œ:</strong> ${schedule.place}</p>
                </div>
                <div class="space-y-4">
                    ${Object.entries(submission.answers).map(([index, answer]) => `
                        <div class="border-b pb-4">
                            <p class="font-medium text-blue-600 mb-2">â“ ${schedule.problems[index]}</p>
                            <p class="mt-2 ml-4 p-3 bg-gray-50 rounded-lg">${answer}</p>
                        </div>
                    `).join('')}
                </div>
            `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeSubmissionModal() {
            const modal = document.getElementById('submissionModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ë°ì´í„° ì´ˆê¸°í™”
        function resetData() {
            if (teacherMode) {
                const confirmReset = confirm("ì •ë§ ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í• ê¹Œìš”? ğŸ¤”");
                if (confirmReset) {
                    scheduleData = [];
                    studentSubmissions = [];
                    localStorage.removeItem('scheduleData');
                    localStorage.removeItem('studentSubmissions');
                    displaySchedules();
                    displaySubmissions();
                    alert("ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆì–´ìš”! ğŸ§¹");
                }
            } else {
                alert("ì„ ìƒë‹˜ë§Œ ì´ˆê¸°í™”í•  ìˆ˜ ìˆì–´ìš”! ğŸ‘©â€ğŸ«");
            }
        }

        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
        function clearInputs() {
            document.getElementById("dateInput").value = "";
            document.getElementById("placeInput").value = "";
            document.getElementById("editor").innerHTML = "";
            document.getElementById("photosLinks").innerHTML = "";
            document.getElementById("websiteLinks").innerHTML = "";
            document.getElementById("problemsContainer").innerHTML = "";
        }

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        window.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeSubmissionModal();
            }
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('submissionModal');
            if (event.target === modal) {
                closeSubmissionModal();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initWysiwygEditor();
            displaySchedules();
            displaySubmissions();
            document.getElementById("problemSection").style.display = !teacherMode ? "block" : "none";
        });
    </script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
